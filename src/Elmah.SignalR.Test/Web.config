<?xml version="1.0"?>
<configuration>

  <configSections>
    <sectionGroup name="elmah">
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah"/>
      <section name="errorPost" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah"/>
      <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah"/>
    </sectionGroup>
    
    <section name="elmahr" type="Elmah.SignalR.Test.ElmahRSectionHandler,Elmah.SignalR.Test" />
  </configSections>

  <elmah>
    <errorLog type="Elmah.MemoryErrorLog, Elmah" />
    <errorPost
      url="http://localhost:37345/posterror.ashx"
      handshakeToken="Lucy in the Sky with Diamonds,Strawberry Fields Forever,The Fool on the Hill"
      infoUrl="http://localhost:37345/elmah.axd"/>
    <errorFilter>
      <test>
        <equal binding="HttpStatusCode" value="404" type="Int32" />
      </test>
    </errorFilter>
  </elmah>

  <elmahr persistorType="Elmah.SignalR.Test.HttpContextErrorsStorePersistor, Elmah.SignalR.Test">
    <application name="ElmahR sample erratic application 1" 
                 handshakeToken="The Fool on the Hill" />
    <application name="ElmahR sample erratic application 2" 
                 handshakeToken="Lucy in the Sky with Diamonds" />
    <application name="ElmahR sample erratic application 3" 
                 handshakeToken="Strawberry Fields Forever" />
  </elmahr>
  
  <connectionStrings>
    <add name="ELMAH.SQLite" connectionString="Data Source=|DataDirectory|errors.s3db"/>
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </assemblies>
    </compilation>

    <authentication mode="Windows"/>
    
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>

    <httpModules>
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah"/>
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah"/>
      
      <!--<add name="ErrorPost" type="Elmah.Sandbox.ErrorPostModule, Elmah.Sandbox" />-->
      <add name="ErrorPost" type="Elmah.SignalR.Test.FakeLoadErrorPostModule, Elmah.SignalR.Test" />
      
    </httpModules>

    <httpHandlers>
      <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah"/>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpHandlers>
  </system.web>

</configuration>
